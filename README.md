C言語 関数・マクロ呼び出し分析ツール
=====================================

## 概要
C言語のソースファイルから関数やマクロの呼び出し関係を解析し、呼び出し元と呼び出し先の対応を出力するPythonプログラムです。

## 使用方法
```bash
python3 analyze_c_calls.py <関数名> <ファイルパス> <行番号>
```

### 引数
- `<関数名>`: 分析対象の関数名
- `<ファイルパス>`: 対象ファイルのパス
- `<行番号>`: 関数が定義されている行番号（1-indexed）

## 仕様
- **関数定義形式**: 関数名の後に`)`があり、その後に`{`が続く形式に対応
  ```c
  int function_name(int param)
  {
      // 関数本体
  }
  ```

- **探索範囲**: 指定された行番号の次の行から、関数本体の終了を示す`}`が行頭に現れるまで探索

- **関数呼び出し抽出**: 正規表現 `(\w+)\s*\(` でマッチする関数名を抽出

- **マクロ呼び出し抽出**: 正規表現 `([A-Z_\d]+)` でマッチするマクロ名を抽出（全て大文字で構成）

- **除外対象**: C言語の予約語（if, while, printf等）は分析対象から除外

- **重複排除**: 同一の関数レベルでは重複した呼び出しは1回のみ出力

- **再帰的分析**: 見つかった関数の定義が1つだけの場合、その関数を再帰的に分析

- **複数定義**: 関数定義が2個以上見つかった場合、grep出力行をそのまま出力

## 出力形式
```
<呼び出し元関数名> <呼び出し先関数/マクロ名>
```

複数の定義が見つかった場合：
```
<ファイルパス>:<行番号>:<内容>
```

## 例

### test.c
```c
int helper_func(int x)
{
    return x * 2;
}

int main_func(int n)
{
    int result = helper_func(n);
    printf("Result: %d\n", result);
    return result;
}
```

### 実行
```bash
$ python3 analyze_c_calls.py main_func test.c 9
main_func helper_func
main_func printf
```

## 実装の特徴
- grepコマンドを使用した効率的な検索
- 無限ループ防止メカニズム
- C言語の予約語フィルタリング
- エラーハンドリング
